/*! avidlife-weather-js - v1.0.0 - 2014-09-10
* https://github.com/robertohori/avidlife-weather
* Copyright (c) 2014 Roberto Hori; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define("weather-client",b(a)):"object"==typeof exports?module.exports=b(a):a.weather_client=b(a)}(this,function(a){"use strict";var b=function(a){var b;try{b=JSON.parse(a.responseText)}catch(c){b=a.responseText}return[b,a]},c=function(c,d,e,f){var g={success:function(){},error:function(){}},h=a.XMLHttpRequest||ActiveXObject,i=new h("MSXML2.XMLHTTP.3.0");return i.open(c,d+"&APPID="+e,!0),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?g.success.apply(g,b(i)):g.error.apply(g,b(i)))},i.send(f),{then:function(a,b){g.success=a||function(){},g.error=b||function(){}}}},d=function(a,b){return c("GET",a,b,null)},e={};return e.settings={url:"http://api.openweathermap.org/data/",apiKey:"c2dc6abf2957262e518e66e401d51461"},e.getToday=function(a){var b=this,c=b.settings.url,e=b.settings.apiKey;return{then:function(b,f){var g={success:b||function(){},error:f||function(){}};return null===a?g.error(null):void d(c+"2.5/weather?q="+a,e).then(function(a){var b={name:a.name};console.log(a),g.success(b)},g.error)}}},e});